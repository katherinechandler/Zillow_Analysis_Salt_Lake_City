# Living small in the city or large in the 'burbs?
## Exploring Salt Lake City's real estate prices to address the eternal question
#### Katherine Chandler, K2 Exploratory Data Analysis

## Background
I am a proponent of smaller homes, and recent anecdotal observations (and meandering dinner discussions) have made me curious about the relationship between the size of a home and its relative appreciation in value. My vocal family members maintain (with fist raised) 'You're better off owning a tiny home downtown than a mansion in the **'burbs**!!!'. Indeed, current hipster cannon asserts that bigger is *not* better when it comes to housing. While the merits of a modestly sized home go beyond the economic, I was curious about how the 'small-home' movement holds up to economic reality. Is a small urban home *really* a better investment than a large suburban home? I recently moved back to my hometown of Salt Lake City, and in an entirely self-serving selection process I elected to address this question using current and historical real estate prices in the Salt Lake City area.

## Questions for Exploration

I broke high level question into three discrete sub-questions:

* Are small homes more valuable (per square foot) than large homes?
* Is a small home downtown really more valuable than a large home in the 'burbs?
* Has the relative value of small urban homes increased more than that of large suburban homes?

## Data Sources

I found that many real estate services (like the local multiple listing service) obfuscate their HTML to hinder web scraping, and few real estate services provide free APIs. Because of these limitations, all of my data came from one source: the tried and true real estate marketplace Zillow. Zillow served as a great resource for both historical and current real estate data in the Salt Lake City area. 

#### Active Listing Data

Zillow maintains 9 different APIs, but these APIs require a call be made on an individual street address (rather than a bulk call like city or ZIP code). In order to generate comprehensive data on current active listings, I modified the [```scrapehero zillow.py```](https://gist.github.com/scrapehero/5f51f344d68cf2c022eb2d23a2f1cf95 "scrapehero") script to generate a csv file containing the listing features of all active listings for 27 unique Salt Lake City ZIP codes. The modified scraping script (```zillow.py```), the script to call the scraping script (```zillow_scraper_calls.py```), ZIP code list, and resulting csv listing file can be found in the 'zillow_scraper' folder of this repository.

The scraped data set includes 841 unique listings containing information about listing type ('title'), address, city, state, ZIP code ('postal_code'), listed sale price (in USD), size (in square feet), bedroom/bathroom count, and the active listing URL.

#### Historical Housing Price Data

To obtain historical real estate prices, I used the 'Home Values' data sets provided in the [Zillow Research Data sets](https://www.zillow.com/research/data/ "Zillow Research Data") (downloaded data sets in the ```'zillow_research_home_values'``` folder of this repository). The 'Home Values' data sets are smoothed, seasonally adjusted aggregates of estimated real estate value cut by location (city, state, metro area) and a given housing type (single family, number of bedrooms, etc.). Estimated real estate value is measured as the Zillow Home Value Index (ZHVI), a home price index (in USD) computed based on proprietary statistical and machine learning models ([ZHVI methodology here](https://www.zillow.com/research/zhvi-methodology-6032/ "ZHVI methodology")). No Zillow research data set provides direct information about home square footage (size), so I used bedroom count as a size proxy for this section of the project. The ZHVI time series contains monthly data for the period from April 1996 to February 2018.

## Cleaning the Data

#### Active Listing Data

The full cleaning code and logic for the active listing data can be found in the 'Zillow_SLC_Current_Active_Listings' notebook in the 'zillow_analysis_notebooks' folder of this repository. In short, the price data was parsed and standardized; the unique listing 'zpid' (Zillow property identifier) was extracted from the URL link and saved as the data frame index; redundant and non-consistent city naming conventions were standardized; and the combined 'facts and features' field was parsed into discrete square footage and bed/bath counts.

I also generated several new features in the data: price per square foot (USD/sqft), 'neighborhood' (a granular geographic clustering of zip codes), 'region' (a broad geographic clustering of zip codes), and a size_type category. 'Small' is classified as less than 1200 sqft, 'medium' as 1200- 2400 sqft, and 'large' as greater than 2400 sqft.

#### Historical Housing Price Data

The full pre-processing for the active listing data can be found in the 'Zillow_SLC_Historical_Data' notebook in the 'analysis_notebooks' of this repository. Since these data sets are published by Zillow, the data was relatively clean and data pre-processing mainly included filtering for housing types / ZIP codes of interest and assigning geographic categories ('neighborhood' and 'region').

## Exploring the Data

I started the analysis by getting a high level view of the real estate market in Salt Lake City. What neighborhoods are associated with the current active listings? What is the average size of a listed home in each neighborhood? What is the average price of a listed home in each neighborhood?

![**Figure 1. Salt Lake City Active Listings by Neighborhood**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_1.png)


![**Figure 2. Square Footage and Price by Neighborhood**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_2.png)

Of the current active listings with Salt Lake City ZIP codes, about 1/3 (36%) are downtown properties. Looking at a summary of the listing features shows some pretty big differences in size and list price by neighborhood. An 'average' Cottonwood home has 4.6 beds in hefty a 4750 sqft with a price-tag of \$1.05 million, while an 'average' home in West Valley is a more modest 3.6 beds in ~2100 sqft for just \$318,212.

This data highlights further regional geographic distinctions that can be made in the real estate listings. Suburban homes on Salt Lake City's east side (Cottonwood, Emigration Canyon, and Millcreek/Holladay) are large and expensive while suburban homes on Salt Lake City's west side (Murray, Taylorsville/Midvale, North Salt Lake, and West Valley) are small and cheap.

I plotted size (in square feet) and list price for Downtown-SLC, East-SLC, and West-SLC to see the spread of these regional differences.

![**Figure 3. Size and Price Distribution by Region**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_3.png)

Homes in Downtown-SLC (median size ~1880 sqft) and West-SLC (median size ~ 1920 sqft) skew smaller than those in East-SLC (median size ~3417 sqft). The West-SLC listings show a large number of listings less than 1500 sqft. The Zillow listing 'title' for these homes is 'Home For Sale' (rather than 'House For Sale'), which is curiously the Zillow euphemism for a trailer doublewide and accounts for the large number of very small, very cheap homes in West-SLC. The size distribution of East-SLC homes is broad, and the top quartile of homes is larger than 5244 sqft.

The price data shows a similar profile for the three geographic regions. Downtown-SLC and West-SLC listings show more tightly clustered price data than the wide spread East-SLC price data, thought the Downtown-SLC data does have a long right-tail. The median Downtown-SLC listing is \$422,000 (mean = \$738,608), the median East-SLC listing is \$617,450 (mean = \$928,387), and the median West-SLC is \$280,000 (mean = \$364,791).

## Now, small house or large house? Which is it?!?

After an initial exploration of the data, I dug into the small versus large comparisons.

#### Question 1. Are small homes more valuable (per square foot) than large homes?
To address this question, I plotted a bar graph of price per square foot for each of the home size_types (small, medium, and large).

![**Figure 4. Price per Square Foot by Home Size**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_4.png)

The mean price per square foot for a home less than 1200 sqft ('small') is \$249, greater than that of either 'medium' sized homes (\$195) or 'large' homes (\$208). **Relative to their size, small homes are more valuable than large homes**. That was easy! Next I addressed geographic features in the small vs. large comparisons.

#### Question 2: Is a small home downtown really more valuable than a large home in the 'burbs?

I approached this question directly by plotting price per square foot for home size categories in the three geographic regions. The answer to Question 1 also made me curious about whether the 'small homes are more valuable' finding holds up for all neighborhoods, so I addressed this question here as well. 

![**Figure 5. Price per Square Foot by Size Category and Region or Neighborhood**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_5.png)

To strictly answer my question, **yes, a small home downtown is more valuable (relative to size) than a large house in the suburbs.** The median price per square foot for a small home in Downtown-SLC is \$304 while large homes in East-SLC and West-SLC are priced at \$216 and \$128, respectively. 

The neighborhood data surprised me, however, in that a small home in Downtown-SLC is *not* more valuable (per square foot) than a small home in a posh eastern suburb. In fact, the most valuable asset type in this data is a small home in the suburb of Cottonwood, with a median price per square foot of \$379. The 'small homes are more valuable' finding does not hold true for the other East-SLC suburbs nor for the West-SLC suburbs.

#### Question 3: Has the relative value of small urban homes increased more than that of large suburban homes?

The first two questions were straightforward, but this question is a bit more nuanced and required some pre-analysis processing. Since I don't have size data for the historic pricing time series, I wanted to confirm the use of bedroom count and as a proxy for square footage (size).

Additionally, I needed to address the differences in magnitude of the ZHVI for different types of homes (small-downtown, large-suburban, etc.). The ZHVI of a small home downtown may be lower in an absolute sense than the ZHVI of a large suburban home, but I'm interested in relative appreciation over time. To address this issue I used the preprocessing.MinMaxScaler() tool from sklearn to normalize each timeseries to the series maximum (scaled to 1) and minimum (scaled to 0).

The historic price data was processed using code in the 'Zillow_SLC_Historic_Data' notebook and saved to a csv file. To see the full processing code refer to the 'Zillow_SLC_Historic_Data' notebook.

![**Figure 6. Square Feet by Bedroom Number**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_6.png)


The above plots confirm that the number of bedrooms is closely associated with square footage. One and two bedroom properties usually fall below the 'small' category cutoff of 1200 sqft (median size is 759 and 1202 sqft, respectively), and homes with four or more bedrooms usually fall within the 'large' category cutoff of 2500+ sqft (median size is 2696 sqft). Thus, for this analysis 'small' homes will be classified as 1-2 bedrooms and 'large' will be classified as 4 or more bedrooms.

I began by plotting the relative ZHVI values for comparable home types in the three geographic regions. Note that the data for 1-bedroom homes in East-SLC and West-SLC is incomplete and inconsistent (likely due to too little data for the ZHVI machine learning model), so I omitted these data from this discussion. 

![**Figure 7. Historical Prices for Comparable Homes By Region**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_7.png)

Relative to the start of the time series in 1996, properties in all 3 geographic regions appreciated largely in parallel. Small and medium homes in West-SLC appreciated more rapidly between 1996 and 2004, possibly due to being especially depressed at the start of the time series. 

During the housing ‘boom’ of 2006-2009, the 3 geographic regions exhibited similar magnitudes of ZHVI appreciation. During the economic downturn between 2009 and 2012, however, the magnitude of ZHVI decline for each region differed. West-SLC properties of all sizes depreciated more than properties in the other regions, and large homes in West-SLC depreciated the most. In contrast, Downtown-SLC properties of all sizes depreciated less than properties in the other regions, and large homes in Downtown-SLC depreciated the least.

During the current market recovery (2013 to present), all property types in all regions are experiencing ZHVI appreciation, with Downtown-SLC properties of all sizes increasing slightly more than properties in other regions.

After exploring the comparable data, I plotted normalized ZHVI for small homes downtown versus large homes in each of the two suburban regions.

![**Figure 8. Historical Prices for Small Urban Homes and Large Suburban Homes**](/Users/jeff/Desktop/K2_DataScience/K2_Project2/SLC_home_price_figures/Figure_8.png)

The plots above tell a complex story, but in short owning a large home in a fancy suburb is actually better than owning a small home downtown, but owning a small home downtown is usually better than owning a large home in a less desirable suburb.

Relative to large homes in both suburban regions, small homes downtown did not appreciate as dramatically during the 2006-2009 boom. During the economic downturn in 2009, however, urban small homes maintained their value as well as large homes in suburban East-SLC and much better than large homes in suburban West-SLC.

It is noteworthy that in this current market upswing (2013 to present) the ZHVI appreciation of small urban homes is catching up to that of large suburban homes. The 2018 data shows small homes at their highest valuation since 1996, while large suburban homes are appreciated to roughly the same valuation as during the 2006-2009 bubble.

Back to our original question: is it better to own a small home downtown than a large home in the suburbs? The answer depends on the specific suburb and the market trajectory, but in the context of Salt Lake City and the current market boom I will give this question a **highly unsatisfying 'probably'**. Small urban homes are likely a better investment than large suburban homes, with the highest appreciation values since 1996 and a high likelihood of maintaining value well in the next downturn.

## Summary

* Are small homes more valuable (per square foot) than large homes?
    
    **Yes.**
    
    
* Is a small home downtown really more valuable than a large home in the 'burbs? 
    
    **Yes, but surprisingly a small home in a fancy suburb is worth more!**


* Has the relative value of small urban homes increased more rapidly than that of larger suburban homes?
    
    **Not in previous real estate bubbles, but in the current market small urban homes have appreciated to their 
    highest value since 1996. Additionally, price behavior in past downturns indicate that small urban homes
    maintain their value as well or better than other property types during market corrections.** 
    

These findings are mixed for the small house people. Small urban homes do hold their value well and in the current market are appreciating quickly, but for prospective buyers small homes come with a high price per square foot. I am satisfied that small urban homes are a stable investment, but I suppose I'll have to keep an open mind about Salt Lake City's eastern suburbs.

## Limitations and Further Exploration

One of the major limitations of this analysis comes from the nature of the price data. The active listing price is not the actual sale price, which could be lower. Similarly the ZHVI in the historical data is not an actual sale price, but is partially derived from past sales. Ultimately, obtaining the actual price from recent and historical transactions would be a more robust method of determining valuation. In California this information is available publically, but most states (including Utah) don't make this information public. 

Another limitation in the data is the incompleteness of the historical data. The data was not available for all of the Salt Lake City ZIP codes of interest (like the Cottonwood suburb), leaving some ambiguity in the historical price data and making it difficult to compare directly to the current listing data.

There is room for a good deal of expansion with this analysis. Though the historical price data was normalized, the actual year-over-year rate of change was not calculated. An interesting future analysis would be to calculate the rate of value change each year and identify regions and home types with notable trajectories. Further home type categories could be added to this exploration, and category classifiers could include condo/ single family, the age of the home, the lot size, and neighborhood demographic features.